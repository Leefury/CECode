INSERT INTO ZCLA_HOUSETYPEFIX
(HOUSETYPEID , FIXID)
SELECT :HOUSETYPE , FIXID
FROM ZCLA_FIXES
WHERE 0=0
AND   FIX <> '-1'
AND   FIXID > 0
;
UPDATE ZCLA_HOUSETYPEFIX
SET MOD_HT = 1
WHERE 0=0
AND   HOUSETYPEID = :HOUSETYPE
;
/* House Type Uplift
*/
:NAME = '';
:FIXID = 0 ;
:LABPOINT = 1.0 ;
:MOD_HT = :HTUPLIFT = 0.0 ;
/* Cursor
*/
DECLARE @HT2 CURSOR FOR
SELECT ZCLA_UPLIFTSPERFIX.UPLIFT
,   ZCLA_UPLIFTSPERFIX.FIXID
,   STRCAT(ZCLA_CHARACTERISTIC.CHARNAME
,   '|'
,   ZCLA_CHARPERMITVALS.VALUE
)
FROM ZCLA_HTCHARS , ZCLA_CHARACTERISTIC, ZCLA_CHARPERMITVALS ,
ZCLA_UPLIFTSPERFIX
WHERE 0=0
AND   ZCLA_CHARPERMITVALS.CHARID = ZCLA_CHARACTERISTIC.CHARID
AND   ZCLA_HTCHARS.CHARID = ZCLA_CHARACTERISTIC.CHARID
AND   ZCLA_HTCHARS.VALUEID = ZCLA_UPLIFTSPERFIX .VALUEID
AND   ZCLA_HTCHARS.VALUEID = ZCLA_CHARPERMITVALS.VALUEID
AND   HOUSETYPEID = :HOUSETYPE
AND   ZCLA_UPLIFTSPERFIX.UPLIFT <> 0
AND   INACTIVE <> 'Y'
;
OPEN @HT2 ;
GOTO 99 WHERE :RETVAL = 0 ;
LABEL 100;
FETCH @HT2 INTO :HTUPLIFT , :FIXID , :NAME;
GOTO 200 WHERE :RETVAL = 0;
/*
*/
SELECT MOD_HT INTO :MOD_HT
FROM ZCLA_HOUSETYPEFIX
WHERE 0=0
AND   FIXID = :FIXID
AND   HOUSETYPEID = :HOUSETYPE
;
UPDATE ZCLA_HOUSETYPEFIX
SET MOD_HT = :MOD_HT * :HTUPLIFT
WHERE 0=0
AND   FIXID = :FIXID
AND   HOUSETYPEID = :HOUSETYPE
;
/*
*/
LOOP 100;
LABEL 200;
CLOSE @HT2 ;
LABEL 99;
