/* refresh the selected House Type */
SELECT 'ZCLA_BUF6' FROM DUMMY
FORMAT '../ZCLA_HOUSETYPE-ZCLA_BUF6.txt' ;
/*
Link GENERALOAD */
SELECT SQL.TMPFILE
INTO :GEN FROM DUMMY;
LINK GENERALLOAD TO :GEN;
ERRMSG 1 WHERE :RETVAL = 0 ;
:LN = 0 ;
/* insert Proj line */
SELECT MAX(LINE) + 1 INTO :LN FROM GENERALLOAD;
INSERT INTO GENERALLOAD (LINE , RECORDTYPE, KEY1)
SELECT :LN , '1' , ITOA(:$$$.DOC)
FROM DUMMY
;
/* insert Housetype line */
INSERT INTO GENERALLOAD (LINE , RECORDTYPE, KEY1 , DATE1)
SELECT :LN + 1 , '2' , ITOA(:$$.HOUSETYPEID) , SQL.DATE
FROM DUMMY
;
/*
*/
DELETE FROM ERRMSGS
WHERE 0=0
AND   USER = SQL.USER
AND   TYPE = 'i'
;
GOTO 50 WHERE :$$$.TYPE = 'Â¬' ;
EXECUTE INTERFACE 'ZCLA_COPYSITEHT', SQL.TMPFILE, '-L', :GEN ;
SELECT 'ZCLA_COPYSITEHT' FROM DUMMY
FORMAT ADDTO '../ZCLA_HOUSETYPE-ZCLA_BUF6.txt'
;
GOTO 90 ;
LABEL 50 ;
EXECUTE INTERFACE 'ZCLA_COPYCUSTHT', SQL.TMPFILE, '-L', :GEN ;
SELECT 'ZCLA_COPYCUSTHT' FROM DUMMY
FORMAT ADDTO '../ZCLA_HOUSETYPE-ZCLA_BUF6.txt'
;
LABEL 90;
:i_LOGGEDBY = 'ZCLA_COPYHT';
#INCLUDE func/ZEMG_ERRMSGLOG
SELECT LINE , RECORDTYPE, KEY1 , LOADED , DATE1
FROM GENERALLOAD
FORMAT ADDTO '../ZCLA_HOUSETYPE-ZCLA_BUF6.txt'
;
UNLINK GENERALLOAD ;
